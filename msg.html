<html>
  <head>
    <title>Handheld App</title>
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./js/leaflet/leaflet.css" />
    <!--[if lte IE 8]>
      <link rel="stylesheet" src="./css/leaflet.ie.css" />
    <![endif]-->
    <script type="text/javascript" src="./js/webinos.js"></script>
    <script type="text/javascript" src="./js/leaflet/leaflet.js"></script>
    <script type="text/javascript" src="./js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="./js/tum.gr-logistics.messaging.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {

        var handleMessage = function(message) {
          $('#msg_receive').append(message.contents.message + "<br><br>");
        }
        
        var messaging = new GRMessaging(function() {
          messaging.searchChannel();
        }, function(message) {
          console.log("== Received message!");
          handleMessage(message);
        });

        $('#btn_send').click(function(){messaging.sendBroadcast();});
        $('#btn_reconnect').click(function(){connectToNextChannel();});

      });
    </script>
  </head>
  <body>
    <h1>Handheld App</h1>
      <div id="top_buttons">
        <input type="button" id="btn_send" value="Send Message">
        <input type="button" id="btn_clr_received" value="Clear">
        <input type="button" id="btn_reconnect" value="Reconnect">
      </div>
      <textarea id="msg_send" cols="50" rows="10">Hello World!</textarea>
      <div id="msg_receive" style="height:150px;width:300px;max-height:300px;overflow:auto; border:thin solid black;"></div>
      <select id="channels" size="5" width="500" style="width: 500px"></select>
      <div id="availableChannels"/>
  </body>
</html>
